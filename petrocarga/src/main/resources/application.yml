spring:
    application:
        name: petrocarga
    
    jackson:
        time-zone: America/Sao_Paulo
        date-format: dd-MM-yyyy
    
    jpa:
        hibernate:
            ddl-auto: validate
        show-sql: true
        open-in-view: true
    
    flyway:
        enabled: true
        locations: classpath:db/migration
        validate-on-migrate: false
        baseline-on-migrate: true
        ignore-migration-patterns: "*:missing"
        connect-retries: 3
        clean-disabled: true
        
    # SMTP configuration centralized and sourced exclusively from environment variables.
    # Set these env vars in Railway project settings (recommended):
    # - SMTP_HOST (e.g., smtp.gmail.com)
    # - SMTP_PORT (use 465 for SSL - recommended for cloud providers)
    # - SMTP_USERNAME (your email address)
    # - SMTP_PASSWORD (App Password from Google Account)
    # - SMTP_FROM (optional, defaults to SMTP_USERNAME)
    # - SMTP_STARTTLS (optional, false when using SSL on port 465)
    # - SMTP_SSL (optional, true when using port 465)
    # - SMTP_TIMEOUT (optional, milliseconds - default 10000)
    #
    # IMPORTANTE: Porta 465 (SSL) é preferível em cloud providers (Railway, Heroku, etc.)
    # porque a porta 587 (STARTTLS) é frequentemente bloqueada para evitar spam.
    mail:
        host: ${SMTP_HOST:}
        port: ${SMTP_PORT:465}
        username: ${SMTP_USERNAME:}
        password: ${SMTP_PASSWORD:}
        from: ${SMTP_FROM:${SMTP_USERNAME:no-reply@petrocarga.test}}
        properties:
            mail:
                smtp:
                    auth: true
                    starttls:
                        enable: ${SMTP_STARTTLS:false}
                    ssl:
                        enable: ${SMTP_SSL:true}
                    connectiontimeout: ${SMTP_TIMEOUT:10000}
                    timeout: ${SMTP_TIMEOUT:10000}
                    writetimeout: ${SMTP_TIMEOUT:10000}
    quartz:
        job-store-type: jdbc
        jdbc:
            initialize-schema: never
server:
    port: ${PORT:8080}
    servlet:
        context-path: /petrocarga
    forward-headers-strategy: framework

logging:
    level:
        root: info
        org:
            springframework:
                web: info
            hibernate:
                SQL: info

jwt:
  secret: ${JWT_SECRET:72f9a128dd6f4c4a9c82e36df3ba62a9d12f1c3b9475a1f0e9d54d7e1b2a3c4d}
  expiration: 86400000

app:
    reservas:
        noshow:
            enabled: false
            grace-minutes: 10
            scan-ms: 1800000
    firebase-push-notification:
        enabled: true
        credentials: "${FIREBASE_CREDENTIALS}"
    cookie-settings:
        secure: true
        same-site: None
    frontend:
        base-url: ${FRONTEND_URL:http://localhost:3000}