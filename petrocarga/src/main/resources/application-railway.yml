spring:
    config:
        activate:
            on-profile: railway

    datasource:
        url: ${DATABASE_URL}
        username: ${DATABASE_USER}
        password: ${DATABASE_PASSWORD}
        driver-class-name: org.postgresql.Driver
        hikari:
            maximum-pool-size: 5

    flyway:
        url: ${DATABASE_URL}
        user: ${DATABASE_USER}
        password: ${DATABASE_PASSWORD}

    # Configuração SMTP para envio de emails em produção
    # IMPORTANTE: Porta 465 (SSL) é OBRIGATÓRIA no Railway pois 587 é bloqueada
    # Ignorando variável SMTP_PORT para forçar 465
    mail:
        host: ${SMTP_HOST:smtp.gmail.com}
        port: 465
        username: ${SMTP_USERNAME:}
        password: ${SMTP_PASSWORD:}
        properties:
            mail:
                smtp:
                    auth: true
                    starttls:
                        enable: false
                    ssl:
                        enable: true
                    connectiontimeout: 10000
                    timeout: 10000
                    writetimeout: 10000
        from: ${SMTP_FROM:${SMTP_USERNAME:no-reply@petrocarga.test}}

app:
    frontend:
        base-url: ${FRONTEND_URL:https://petrocarga.vercel.app}